CREATE TABLE SCHOOLS(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
    NAME VARCHAR(255)
);
--
INSERT INTO SCHOOLS (ID, NAME) VALUES (1, 'English Forward');
--
INSERT INTO SCHOOLS (NAME) VALUES ('English Forward');
--
CREATE TABLE BRANCHES(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
    NAME VARCHAR(255),
    SCHOOL_ID INT,
    FOREIGN KEY (SCHOOL_ID) REFERENCES SCHOOLS(ID)
);
--
INSERT INTO BRANCHES (ID, NAME, SCHOOL_ID)
    VALUES (1, 'EF - Горьковская', 1),
           (2, 'EF - Парк Победы', 1);
--
INSERT INTO BRANCHES (NAME, SCHOOL_ID)
VALUES ('EF - Горьковская', 1),
       ('EF - Парк Победы', 1);
--
CREATE TABLE ROLES(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
    ROLE VARCHAR(30) NOT NULL
);
--
INSERT INTO ROLES (ROLE) VALUES ('ADMIN'), ('TEACHER'), ('STUDENT'), ('UNKNOWN');
--
CREATE TABLE USERS(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
    LASTNAME VARCHAR(255) NOT NULL,
    FIRSTNAME VARCHAR(255) NOT NULL,
    MIDDLENAME VARCHAR(255),
    EMAIL VARCHAR(255) NOT NULL,
    LOGIN VARCHAR(255) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    ROLE_ID INT NOT NULL,
    SCHOOL_ID INT NOT NULL,
    BRANCH_ID INT NOT NULL,
    FOREIGN KEY (ROLE_ID) REFERENCES ROLES(ID),
    FOREIGN KEY (BRANCH_ID) REFERENCES BRANCHES(ID)
);
--
INSERT INTO USERS (LASTNAME, FIRSTNAME, MIDDLENAME, EMAIL, LOGIN, PASSWORD, ROLE_ID, SCHOOL_ID, BRANCH_ID) VALUES
    ('Ruzaeva', 'Alisa', 'Andreevna', 'alise.ruzaeva@yandex.ru', 'alise.ruzaeva@yandex.ru', '1', 3, 1, 2);
--
INSERT INTO USERS (LASTNAME, FIRSTNAME, MIDDLENAME, EMAIL, LOGIN, PASSWORD, ROLE_ID, SCHOOL_ID, BRANCH_ID) VALUES
('Ruzaeva', 'Oxana', 'Nikolaevna', 'om@eforward.ru', 'om@eforward.ru', '$2a$10$YNL73tPwGAssNlDwyW5VKOOsGrxiAaRjzX8/WLFqEsGosfFPHCI3y', 1, 1, 2);
--
ALTER TABLE USERS ADD SCHOOL_ID INT;
ALTER TABLE USERS DROP COLUMN SCHOOL_ID;
ALTER TABLE USERS ADD TEACHER_ID INT;
--
UPDATE USERS SET SCHOOL_ID = 1 WHERE id > 0;
--
CREATE TABLE GROUPS(
   ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
   GROUP_NAME VARCHAR(255) NOT NULL,
   SCHOOL_ID INT NOT NULL
);
--
INSERT INTO GROUPS (GROUP_NAME, SCHOOL_ID, TEACHER_ID) VALUES ('755A', 1, 12);
ALTER TABLE GROUPS ADD TEACHER_ID INT;
UPDATE GROUPS SET GROUPS.TEACHER_ID = 12 WHERE ID > 0;
--
CREATE TABLE LESSONS(
   ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
   LESSON_NAME VARCHAR(255) NOT NULL,
   PATH VARCHAR(255) NOT NULL,
   LEVEL_ID INT NOT NULL,
   COURSE_ID INT NOT NULL,
   SCHOOL_ID INT NOT NULL
);
--
INSERT INTO LESSONS (LESSON_NAME, PATH, LEVEL_ID, COURSE_ID, SCHOOL_ID) VALUES ('REGULAR VERBS', 'D:\coding\projects\EF\express_test_project\src\main\resources\tests\eng\level01\lesson01.txt', 1, 1, 1);
ALTER TABLE LESSONS ADD PATH VARCHAR(255) NOT NULL;